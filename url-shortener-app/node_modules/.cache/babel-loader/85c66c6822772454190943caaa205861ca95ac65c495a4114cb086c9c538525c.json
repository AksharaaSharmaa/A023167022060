{"ast":null,"code":"import axios from 'axios';\n\n/**\r\n * Log function that makes an API call to the test server\r\n * @param {string} stack - The stack (e.g., \"backend\", \"frontend\")\r\n * @param {string} level - The log level (e.g., \"error\", \"fatal\", \"info\", \"warn\", \"debug\")\r\n * @param {string} packageName - The package/module name\r\n * @param {string} message - The log message\r\n */\nexport async function Log(stack, level, packageName, message) {\n  try {\n    // Validate inputs according to API constraints\n    const validStacks = ['backend', 'frontend'];\n    const validLevels = ['debug', 'info', 'warn', 'error', 'fatal'];\n    const validBackendPackages = ['cache', 'controller', 'cron_job', 'db', 'domain', 'handler', 'repository', 'route', 'service'];\n    const validFrontendPackages = ['component', 'hook', 'page', 'state', 'style'];\n    const validBothPackages = ['auth', 'config', 'middleware', 'utils'];\n    if (!validStacks.includes(stack.toLowerCase())) {\n      throw new Error(`Invalid stack. Must be one of: ${validStacks.join(', ')}`);\n    }\n    if (!validLevels.includes(level.toLowerCase())) {\n      throw new Error(`Invalid level. Must be one of: ${validLevels.join(', ')}`);\n    }\n    const stackLower = stack.toLowerCase();\n    const levelLower = level.toLowerCase();\n    const packageLower = packageName.toLowerCase();\n\n    // Validate package based on stack\n    const allValidPackages = [...validBackendPackages, ...validFrontendPackages, ...validBothPackages];\n    if (!allValidPackages.includes(packageLower)) {\n      throw new Error(`Invalid package. Must be one of: ${allValidPackages.join(', ')}`);\n    }\n    const logData = {\n      stack: stackLower,\n      level: levelLower,\n      package: packageLower,\n      message,\n      timestamp: new Date().toISOString()\n    };\n    console.log(`[${levelLower.toUpperCase()}] [${stackLower}] [${packageLower}] ${message}`);\n\n    // Use the auth token directly\n    const authToken = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJNYXBDbGFpbXMiOnsiYXVkIjoiaHR0cDovLzIwLjI0NC41Ni4xNDQvZXZhbHVhdGlvbi1zZXJ2aWNlIiwiZW1haWwiOiJha3NoYXJhLnNoYXJtYS5jb250YWN0QGdtYWlsLmNvbSIsImV4cCI6MTc1NDM3MjEyOSwiaWF0IjoxNzU0MzcxMjI5LCJpc3MiOiJBZmZvcmQgTWVkaWNhbCBUZWNobm9sb2dpZXMgUHJpdmF0ZSBMaW1pdGVkIiwianRpIjoiNDBlNzEyMDAtN2M3NC00YzAwLTg5YzEtNmY2YmIyMTExZGEwIiwibG9jYWxlIjoiZW4tSU4iLCJuYW1lIjoiYWtzaGFyYSBzaGFybWEiLCJzdWIiOiI3YmNlYjI1Zi1hMTAyLTQ3NzgtYTgzZi1jY2UyMGZmNzU1ZTMifSwiZW1haWwiOiJha3NoYXJhLnNoYXJtYS5jb250YWN0QGdtYWlsLmNvbSIsIm5hbWUiOiJha3NoYXJhIHNoYXJtYSIsInJvbGxObyI6ImEwMjMxNjcwMjIwNjAiLCJhY2Nlc3NDb2RlIjoieXZoZGRhIiwiY2xpZW50SUQiOiI3YmNlYjI1Zi1hMTAyLTQ3NzgtYTgzZi1jY2UyMGZmNzU1ZTMiLCJjbGllbnRTZWNyZXQiOiJTVVl4UlJ5cXJ6ZmNGeGVaIn0.51Di_m3nQ7udoWLw7mVdwuq2jY3-wxMZ_oicy__iD_0\";\n\n    // Prepare headers\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${authToken}`\n    };\n\n    // Make API call to test server\n    const response = await axios.post('http://20.244.56.144/evaluation-service/logs', logData, {\n      headers\n    });\n    return {\n      success: true,\n      data: response.data,\n      message: 'Log sent successfully'\n    };\n  } catch (error) {\n    console.error('Failed to send log to test server:', error.message);\n    return {\n      success: false,\n      error: error.message,\n      message: 'Failed to send log'\n    };\n  }\n}\n\n// Export default for convenience\n_c = Log;\nexport default Log;\nvar _c;\n$RefreshReg$(_c, \"Log\");","map":{"version":3,"names":["axios","Log","stack","level","packageName","message","validStacks","validLevels","validBackendPackages","validFrontendPackages","validBothPackages","includes","toLowerCase","Error","join","stackLower","levelLower","packageLower","allValidPackages","logData","package","timestamp","Date","toISOString","console","log","toUpperCase","authToken","headers","response","post","success","data","error","_c","$RefreshReg$"],"sources":["C:/Users/New User/OneDrive/Desktop/A023167022060/url-shortener-app/src/logging-middleware/index.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n/**\r\n * Log function that makes an API call to the test server\r\n * @param {string} stack - The stack (e.g., \"backend\", \"frontend\")\r\n * @param {string} level - The log level (e.g., \"error\", \"fatal\", \"info\", \"warn\", \"debug\")\r\n * @param {string} packageName - The package/module name\r\n * @param {string} message - The log message\r\n */\r\nexport async function Log(stack, level, packageName, message) {\r\n  try {\r\n    // Validate inputs according to API constraints\r\n    const validStacks = ['backend', 'frontend'];\r\n    const validLevels = ['debug', 'info', 'warn', 'error', 'fatal'];\r\n    const validBackendPackages = ['cache', 'controller', 'cron_job', 'db', 'domain', 'handler', 'repository', 'route', 'service'];\r\n    const validFrontendPackages = ['component', 'hook', 'page', 'state', 'style'];\r\n    const validBothPackages = ['auth', 'config', 'middleware', 'utils'];\r\n\r\n    if (!validStacks.includes(stack.toLowerCase())) {\r\n      throw new Error(`Invalid stack. Must be one of: ${validStacks.join(', ')}`);\r\n    }\r\n\r\n    if (!validLevels.includes(level.toLowerCase())) {\r\n      throw new Error(`Invalid level. Must be one of: ${validLevels.join(', ')}`);\r\n    }\r\n\r\n    const stackLower = stack.toLowerCase();\r\n    const levelLower = level.toLowerCase();\r\n    const packageLower = packageName.toLowerCase();\r\n\r\n    // Validate package based on stack\r\n    const allValidPackages = [...validBackendPackages, ...validFrontendPackages, ...validBothPackages];\r\n    \r\n    if (!allValidPackages.includes(packageLower)) {\r\n      throw new Error(`Invalid package. Must be one of: ${allValidPackages.join(', ')}`);\r\n    }\r\n\r\n    const logData = {\r\n      stack: stackLower,\r\n      level: levelLower,\r\n      package: packageLower,\r\n      message,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    console.log(`[${levelLower.toUpperCase()}] [${stackLower}] [${packageLower}] ${message}`);\r\n\r\n    // Use the auth token directly\r\n    const authToken = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJNYXBDbGFpbXMiOnsiYXVkIjoiaHR0cDovLzIwLjI0NC41Ni4xNDQvZXZhbHVhdGlvbi1zZXJ2aWNlIiwiZW1haWwiOiJha3NoYXJhLnNoYXJtYS5jb250YWN0QGdtYWlsLmNvbSIsImV4cCI6MTc1NDM3MjEyOSwiaWF0IjoxNzU0MzcxMjI5LCJpc3MiOiJBZmZvcmQgTWVkaWNhbCBUZWNobm9sb2dpZXMgUHJpdmF0ZSBMaW1pdGVkIiwianRpIjoiNDBlNzEyMDAtN2M3NC00YzAwLTg5YzEtNmY2YmIyMTExZGEwIiwibG9jYWxlIjoiZW4tSU4iLCJuYW1lIjoiYWtzaGFyYSBzaGFybWEiLCJzdWIiOiI3YmNlYjI1Zi1hMTAyLTQ3NzgtYTgzZi1jY2UyMGZmNzU1ZTMifSwiZW1haWwiOiJha3NoYXJhLnNoYXJtYS5jb250YWN0QGdtYWlsLmNvbSIsIm5hbWUiOiJha3NoYXJhIHNoYXJtYSIsInJvbGxObyI6ImEwMjMxNjcwMjIwNjAiLCJhY2Nlc3NDb2RlIjoieXZoZGRhIiwiY2xpZW50SUQiOiI3YmNlYjI1Zi1hMTAyLTQ3NzgtYTgzZi1jY2UyMGZmNzU1ZTMiLCJjbGllbnRTZWNyZXQiOiJTVVl4UlJ5cXJ6ZmNGeGVaIn0.51Di_m3nQ7udoWLw7mVdwuq2jY3-wxMZ_oicy__iD_0\";\r\n\r\n    // Prepare headers\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${authToken}`\r\n    };\r\n\r\n    // Make API call to test server\r\n    const response = await axios.post('http://20.244.56.144/evaluation-service/logs', logData, { headers });\r\n    \r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: 'Log sent successfully'\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('Failed to send log to test server:', error.message);\r\n    return {\r\n      success: false,\r\n      error: error.message,\r\n      message: 'Failed to send log'\r\n    };\r\n  }\r\n}\r\n\r\n// Export default for convenience\r\nexport default Log; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}